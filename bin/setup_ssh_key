#!/usr/bin/env bash

#!/bin/bash

echo "Setting up SSH key..."

# Generate SSH key if it doesn't exist
if [ ! -f ~/.ssh/gitpod_ec2_key ]; then
    ssh-keygen -t rsa -b 2048 -f ~/.ssh/gitpod_ec2_key -N ""
fi

# Start ssh-agent and add the key
eval $(ssh-agent -s)
ssh-add ~/.ssh/gitpod_ec2_key

# Define the project directory
PROJECT_DIR="$HOME/LAMP-STACK/lamp-aws-automation/terraform"

# Create the keys directory in the project directory
mkdir -p "$PROJECT_DIR/keys"

# Copy the public key to the project directory
cp ~/.ssh/gitpod_ec2_key.pub "$PROJECT_DIR/keys/"

echo "SSH key setup complete."